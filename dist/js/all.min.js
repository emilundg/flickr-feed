async function fetchImages(e){let t=buildUrl(e),n=[];try{let e=await fetch(t);(await e.json()).photos.photo.forEach(e=>{let t=this.imageURLBuilder(e);n.push(t)})}catch(e){console.log(e)}return n}function buildUrl(e){return"https://www.flickr.com/services/rest/?method=flickr.photos.search&api_key=d22802aa39df5256ae0c31881d8a733f&tags="+e+"&per_page=50&page=&format=json&nojsoncallback=1"}function clearPreviousImages(){for(;galleryContainer.firstChild;)galleryContainer.removeChild(galleryContainer.firstChild)}function imageURLBuilder(e){return"https://farm"+e.farm+".staticflickr.com/"+e.server+"/"+e.id+"_"+e.secret+".jpg"}function displayImages(e){const t=galleryContainer.classList;t.contains("error-message__no-result")&&t.remove("error-message__no-result"),e.forEach(e=>{const t=this.createImageElement(e);galleryContainer.appendChild(t)})}function createImageElement(e){const t=document.createElement("div");return t.setAttribute("style","background-image: url("+e+");"),t.classList.add("gallery__image"),t.addEventListener("click",function(){openModal(e)}),t}function displayLoader(){const e=document.getElementById("loaderContainer");if(0===e.childElementCount){const t=document.createElement("img");t.src="https://raw.githubusercontent.com/emilundg/flickr-feed/master/src/resources/images/loader.gif",t.id="loader",t.classList.add("center"),e.appendChild(t)}}function removeLoader(){const e=document.getElementById("loader");e&&e.remove()}const galleryContainer=document.getElementById("galleryContainer"),form=document.querySelector("form");function displayEmpty(){const e=document.createElement("h2");e.textContent="No images found! Try searching for something else.",e.classList.add("center"),galleryContainer.appendChild(e),galleryContainer.classList.add("error-message__no-result")}form.addEventListener("submit",function(e){e.preventDefault(),displayLoader(),clearPreviousImages(),fetchImages(document.getElementById("searchInput").value).then(function(e){removeLoader(),e.length>0?this.displayImages(e):this.displayEmpty()})});const modalElement=document.getElementById("galleryModal");function openModal(e){const t=copyImageElement(e);modalElement.appendChild(t);const n=getYScrollPosition();modalElement.style.top=n+"px",enableClose(),disableScroll(),modalElement.style.visibility="visible"}function copyImageElement(e){const t=document.createElement("div");return t.setAttribute("style","background-image: url("+e+");"),t.classList.add("gallery__image"),t}function getYScrollPosition(){return window.scrollY}function enableClose(){document.addEventListener("keyup",enableKeyboardClose),modalElement.addEventListener("click",function(e){closeModal()})}function enableKeyboardClose(){27===window.event.keyCode&&closeModal()}function disableKeyboardClose(){document.removeEventListener("keyup",enableKeyboardClose)}function disableScroll(){document.body.style.overflow="hidden"}function enableScroll(){document.body.style.overflow="visible"}function closeModal(){disableKeyboardClose(),enableScroll(),modalElement.firstChild&&modalElement.removeChild(modalElement.firstChild),modalElement.style.visibility="hidden"}